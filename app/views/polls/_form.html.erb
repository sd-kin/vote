<div class='container' id='new-poll'>
  <%= form_for @poll, html: { :multipart => true, class: 'form-with-image-upload' }, remote: true do |f| %>
    <div class='row form-group'>
      <div class='col-xs-1'>
        <%= f.label      'Title:', { class: "control-label" } %>
      </div>
      <div class='col-xs-11'>
        <%= f.text_field :title,   { class: "form-control" } %>
      </div>
    </div>

    <div class='row form-group'>
      <div class='col-xs-6'>
        <div class='row'>
          <button type="button" class="btn btn-primary btn-block" id='poll-voters-limit-btn'>Add voters limit</button>
        </div>

        <div class='row hide poll-limit-input' id='voters-limit-input'>
          <div class='input-group'>
           <%= f.number_field :max_voters, {min: 1, class: "form-control" } %>
           <span class="input-group-addon clicable" id='cancel-voters-limit-input'>
              <span class="glyphicon glyphicon-remove"></span>
            </span>
          </div>
        </div>
      </div>

      <div class='col-xs-6'>
        <div class='row'>
          <button type="button" class="btn btn-primary btn-block" id='poll-expiration-date-btn'>Change expiration date</button>
        </div>

        <div class='input-group date hide poll-limit-input' id='poll-expiration-date-input'>
          <%= f.text_field  :expire_at, { class: "form-control" } %>
          <span class="input-group-addon">
              <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>

      </div>
    </div>

    <div class='row form-group'>
      <div class='dropzone'> <p> Drag'n'drop files here </p> </div>
    </div>

    <div class='attached-images'></div>

    <div class='row form-group'>
      <div class="input-group file-input">
        <span class="input-group-addon clicable" id="basic-addon1">
          <span class="glyphicon glyphicon-open">
            <%= f.file_field :images, {id: 'image_input', multiple: true }%>
          </span>
        </span>
        <label class="form-control file-label label-primary clicable" aria-describedby="basic-addon1"> No file chosen </label>
      </div>
    </div>

    <%= render 'shared/images_form', imageable: @poll %>

    <div class='row form-group'>
      <%= f.submit 'Ok', { class: "btn btn-primary btn-block" } %>
    </div>
  <% end %>

  <%= button_to 'Cancel', {action: :edit}, method: :get unless @poll.new_record? %>
</div>
